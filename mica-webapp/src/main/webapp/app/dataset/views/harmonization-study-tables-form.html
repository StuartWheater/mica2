<div class="voffset4">
  <h3 translate>dataset.harmonized-tables.title</h3>

  <p class="help-block" translate>dataset.harmonized-tables.info</p>

  <div ng-show="inViewMode() && permissions.canEdit()">
    <button type="button" class="btn btn-info btn-sm voffset2" ng-click="addStudyTable()">
      <i class="fa fa-plus"></i> <span translate>dataset.add-study-table</span>
    </button>

    <button type="button" class="btn btn-info btn-sm voffset2" ng-click="addNetworkTable()">
      <i class="fa fa-plus"></i> <span translate>dataset.add-network-table</span>
    </button>

    <button type="button" class="btn btn-danger btn-sm voffset2" ng-click="deleteSelectedOpalTables()" ng-if="opalTables && opalTables.length">
      <i class="fa fa-trash-o"></i> <span translate>global.delete-selected</span>
    </button>
  </div>

  <div ng-show="opalTables && opalTables.length">
    <table class="table table-bordered table-striped" ng-show="dataset['obiba.mica.HarmonizationDatasetDto.type']">
      <thead>
      <tr>
        <th></th>
        <th translate>study.label</th>
        <th translate>type</th>
        <th translate>dataset.project</th>
        <th translate>dataset.table</th>
        <th translate>dataset.table-name</th>
        <th translate>dataset.table-description</th>
        <th translate>actions</th>
        <th translate>global.order</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="wrapper in opalTables">
        <td>
          <input type="checkbox" ng-model="wrapper.selected">
        </td>
        <td >
          <a ng-show="wrapper.type === 'studyTable'" ng-href="#/study/{{wrapper.table.studyId}}">
            {{wrapper.table.studyId}}
          </a>
          <a ng-show="wrapper.type === 'networkTable'" ng-href="#/network/{{wrapper.table.networkId}}">
            {{wrapper.table.networkId}}
          </a>
        </td>
        <td>
          {{(wrapper.type === 'studyTable' ? 'study.label' : 'network.label') | translate}}
        </td>
        <td>
          {{wrapper.table.project}}
        </td>
        <td>
          {{wrapper.table.table}}
        </td>
        <td>
          <localized value="wrapper.table.name" lang="tab.lang"></localized>
        </td>
        <td>
          <localized value="wrapper.table.description" lang="tab.lang"></localized>
        </td>
        <td>
          <a href="" ng-click="editOpalTable(wrapper)" class="action"><i class="fa fa-pencil"></i></a>
          <a href="" ng-click="deleteOpalTable(wrapper)" class="action"><i class="fa fa-trash-o"></i></a>
        </td>
        <td>
          <ul class="list-inline no-wrap">
            <li ng-show="!$last">
              <a href ng-click="moveOpalTableDown($index)" title="{{'down' | translate}}"><i class="fa fa-arrow-down"></i></a>
            </li>
            <li ng-show="!$first">
              <a href ng-click="moveOpalTableUp($index)" title="{{'up' | translate}}"><i class="fa fa-arrow-up"></i></a>
            </li>
          </ul>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
