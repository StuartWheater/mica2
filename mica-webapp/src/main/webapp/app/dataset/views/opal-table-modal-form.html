<div class="modal-content">

  <form name="form" role="form" novalidate class="ng-scope ng-invalid ng-invalid-required ng-dirty ng-valid-minlength" ng-submit="save(form)">

    <div class="modal-header">
      <button type="button" class="close" aria-hidden="true" ng-click="cancel()">&times;</button>
      <h4 class="modal-title" id="myStudyLabel">
        <span ng-if="type === 'studyTable'" translate>dataset.study-table.title</span>
        <span ng-if="type === 'networkTable'" translate>dataset.network-table.title</span>
      </h4>
    </div>

    <div class="modal-body">

      <p class="alert alert-danger" ng-show="form.saveAttempted && form.$invalid" translate="">fix-error</p>
      <network-table-modal-form-section ng-if="type === 'networkTable'"></network-table-modal-form-section>
      <study-table-modal-form-section ng-if="type === 'studyTable'"></study-table-modal-form-section>

      <h4 translate>dataset.datasource.title</h4>

      <p class="help-block" translate>dataset.datasource.info</p>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label class="control-label">
              <span translate>dataset.project</span>
              <span>*</span>
            </label>
            <ui-select theme="bootstrap" ng-model="selected.project" reset-search-input="true" required="true">
              <ui-select-match>{{$select.selected.name}}</ui-select-match>
              <ui-select-choices repeat="project in projects | filter: {name: $select.search}">
                <span ng-bind-html="project.name | highlight: $select.search"></span>
              </ui-select-choices>
            </ui-select>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label class="control-label">
              <span translate>dataset.table</span>
              <span>*</span>
            </label>
            <ui-select theme="bootstrap" ng-model="selected.project.table" reset-search-input="true" required="true">
              <ui-select-match>{{$select.selected}}</ui-select-match>
              <ui-select-choices repeat="table in selected.project.datasource.table | filter: $select.search">
                <span ng-bind-html="table | highlight: $select.search"></span>
              </ui-select-choices>
            </ui-select>
          </div>
        </div>
      </div>

      <h4 translate>dataset.options</h4>

      <div localized-input name="studyTable.name" model="table.name" label="dataset.table-name" lang="tab.lang"></div>

      <div localized-textarea name="studyTable.description" model="table.description" label="dataset.table-description" lang="tab.lang"></div>

    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-default" ng-click="cancel()">
        <span translate>cancel</span>
      </button>
      <button type="submit" class="btn btn-primary">
        <span translate>save</span>
      </button>
    </div>

  </form>

</div>
